var r,e=require("@datocms/cma-client-browser"),n=/\\\*/g,t=/ASTERISKPLACEHOLDER/gm,o=/\\_/g,i=/UNDERSCOREPLACEHOLDER/gm,u=/UNDERSCOREBOLDPLACEHOLDER/gm,s=/(__)(.*?)(__)/g,a=/ASTERISKBOLDPLACEHOLDER/gm,c=/(\*\*)(.*?)(\*\*)/g,l=/UNDERSCOREITALICPLACEHOLDER/gm,f=/(_)(.*?)(_)/g,v=/ASTERISKITALICPLACEHOLDER/gm,h=/(\*)(.*?)(\*)/g,d=/^\[([^[]+)\]\(([^)]+)\)/,p=[a.source,u.source,v.source,l.source],g=((r={})[i.source]=2,r[t.source]=2,r),E=function(r){for(var e=Object.keys(g),n=0,t=e.length;n<t;n++)if(r.startsWith(e[n]))return e[n];return null},m=function(r,e){for(var n=0,t=p.length;n<t;n++)if(r.startsWith(p[n]))return e[e.length-1]===p[n]?e.pop():e.push(p[n]),p[n];return null};function b(r,e,n){if(!r.s){if(n instanceof A){if(!n.s)return void(n.o=b.bind(null,r,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(b.bind(null,r,e),b.bind(null,r,2));r.s=e,r.v=n;const t=r.o;t&&t(r)}}var A=/*#__PURE__*/function(){function r(){}return r.prototype.then=function(e,n){var t=new r,o=this.s;if(o){var i=1&o?e:n;if(i){try{b(t,1,i(this.v))}catch(r){b(t,2,r)}return t}return this}return this.o=function(r){try{var o=r.v;1&r.s?b(t,1,e?e(o):o):n?b(t,1,n(o)):b(t,2,o)}catch(r){b(t,2,r)}},t},r}();function y(r){return r instanceof A&&1&r.s}var x="undefined"==typeof window,O=function(r){return new Promise(function(e,n){return setTimeout(e,r)})};exports.awaitElement=function(r){try{var e,n=function(n){if(e)return n;throw new Error("Element "+r+" not found")},t=0,o=function(r,e,n){for(var t;;){var o=r();if(y(o)&&(o=o.v),!o)return i;if(o.then){t=0;break}var i=n();if(i&&i.then){if(!y(i)){t=1;break}i=i.s}if(e){var u=e();if(u&&u.then&&!y(u)){t=2;break}}}var s=new A,a=b.bind(null,s,2);return(0===t?o.then(l):1===t?i.then(c):u.then(f)).then(void 0,a),s;function c(t){i=t;do{if(e&&(u=e())&&u.then&&!y(u))return void u.then(f).then(void 0,a);if(!(o=r())||y(o)&&!o.v)return void b(s,1,i);if(o.then)return void o.then(l).then(void 0,a);y(i=n())&&(i=i.v)}while(!i||!i.then);i.then(c).then(void 0,a)}function l(r){r?(i=n())&&i.then?i.then(c).then(void 0,a):c(i):b(s,1,i)}function f(){(o=r())?o.then?o.then(l).then(void 0,a):l(o):b(s,1,i)}}(function(){return!e&&t<100},function(){return t++},function(){var n=document.querySelector(function(r){return(r.match(/(#[0-9][^\s:,]*)/g)||[]).forEach(function(e){r=r.replace(e,'[id="'+e.replace("#","")+'"]')}),r}(r));return n?(e=1,n):Promise.resolve(O(30)).then(function(){})});return Promise.resolve(o&&o.then?o.then(n):n(o))}catch(r){return Promise.reject(r)}},exports.capitalize=function(r,e){return void 0===e&&(e=!1),(e?r.toLowerCase():r).replace(/(?:^|\s|["'([{])+\S/g,function(r){return r.toUpperCase()})},exports.chunkArray=function(r,e){for(var n=[],t=0;t<r.length;t+=e)n.push(r.slice(t,t+e));return n},exports.isEmpty=function(r){return 0===Object.keys(r).filter(function(e){return void 0!==r[e]}).length},exports.isServer=x,exports.iterateObject=function(r,e){var n=0,t=[];if(Array.isArray(r))for(;n<r.length&&!1!==e(r[n],n,r);++n);else if("object"==typeof r&&null!==r)for(t=Object.keys(r);n<t.length&&!1!==e(r[t[n]],t[n],r);++n);},exports.markdownTruncate=function(r,e){void 0===r&&(r=""),void 0===e&&(e={limit:1,ellipsis:!1});var p=e||{},b=p.limit,A=p.ellipsis;if(r.length<=b)return r;var y=function(r){return r.replace(o,i.source).replace(n,t.source).replace(s,u.source+"$2"+u.source).replace(c,a.source+"$2"+a.source).replace(f,l.source+"$2"+l.source).replace(h,v.source+"$2"+v.source)}(r);return y=function(r,e,n){var t=0,o=function r(n){for(var o=[],i=!1,u="",s=0;t<e&&s<n.length;){var a=m(n.substring(s),o);a&&(u+=a,s+=a.length,i=!0);var c=E(n.substring(s));c&&(u+=c,s+=c.length,i=!0,t+=g[c]);var l=new RegExp(d).exec(n.substring(s));if(l){var f=l[2];u+="["+r(l[1])+"]("+f+")",s+=l[0].length,i=!0}a||l||(u+=n[s],s++),i||t++,i=!1}for(u=u.trimEnd();o.length>0;)u+=o.pop();return u}(r);return n&&o.length<r.length&&(o+="..."),o}(y,b,A),function(r){return r.replace(i,"\\_").replace(t,"\\*").replace(u,"__").replace(a,"**").replace(l,"_").replace(v,"*")}(y)},exports.parseDatoCMSApiError=function(r){return r instanceof e.ApiError==0?"string"==typeof r?r:r.message||r.toString():new e.ApiError(r).errors.map(function(r){var e,n=""+r.attributes.code,t=[];return Array.isArray(null==(e=r.attributes.details)?void 0:e.errors)&&r.attributes.details.errors.forEach(function(r){t.push(Object.keys(r).map(function(e){return e+": "+r[e]}).join(", "))}),n+(t.length?": "+t.join(". "):"")}).join("\n")},exports.parseDatoError=function(r){return r.errors.map(function(r){var e=r.attributes,n=e.details;return{code:e.code,field:null==n?void 0:n.field,message:null==n?void 0:n.message,detailsCode:null==n?void 0:n.code,errors:Array.isArray(null==n?void 0:n.errors)?null==n?void 0:n.errors.join(". "):void 0}}).map(function(r){var e=r.field,n=r.errors;return r.code+" "+(e?"("+e+")":"")+" "+(r.message||"")+" "+(r.detailsCode||"")+" "+(n?"("+n+")":"")}).join("\n")},exports.rInt=function(r,e){return r=Math.ceil(r),e=Math.floor(e),Math.floor(Math.random()*(e-r+1))+r},exports.sleep=O,exports.sortSwedish=function(r,e){var n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Å","Ä","Ö"];return r.sort(function(r,t){var o=n.findIndex(function(n){var t;return n===(null==(t="string"==typeof e?r[e]:r)?void 0:t.charAt(0).toUpperCase())}),i=n.findIndex(function(r){var n;return r===(null==(n="string"==typeof e?t[e]:t)?void 0:n.charAt(0).toUpperCase())});return o?o>i?1:o===i?0:-1:-1})},exports.truncateParagraph=function(r,e,n,t){var o,i;if(void 0===e&&(e=1),void 0===n&&(n=!0),void 0===t&&(t=200),!r||r.length<t)return r;var u=null==(o=r.split("."))?void 0:o.slice(0,e+1).join(".").lastIndexOf("."),s=null==(i=r.split("? "))?void 0:i.slice(0,e+1).join("? ").lastIndexOf("? "),a=-1!==s&&s<u||-1===u&&s>-1;return-1===u&&-1===s&&(u=t-1,n=!0),r.substring(0,a?s:u)+(n?"...":a?"?":".")},exports.truncateWords=function(r,e){if(r.length<=e)return r;var n=r.substring(0,e),t=n.lastIndexOf(" ");return-1!==t&&(n=n.substr(0,t)),n+"..."};
//# sourceMappingURL=index.cjs.map
