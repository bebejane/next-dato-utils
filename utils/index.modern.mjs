import{ApiError as r}from"@datocms/cma-client-browser";var n;function e(r,n){void 0===r&&(r=""),void 0===n&&(n={limit:1,ellipsis:!1});var e=n||{},t=e.limit,i=e.ellipsis;if(r.length<=t)return r;var o=p(r);return o=O(o,t,i),m(o)}var t=/\\\*/g,i=/ASTERISKPLACEHOLDER/gm,o=/\\_/g,u=/UNDERSCOREPLACEHOLDER/gm,s=/UNDERSCOREBOLDPLACEHOLDER/gm,c=/(__)(.*?)(__)/g,a=/ASTERISKBOLDPLACEHOLDER/gm,f=/(\*\*)(.*?)(\*\*)/g,l=/UNDERSCOREITALICPLACEHOLDER/gm,v=/(_)(.*?)(_)/g,h=/ASTERISKITALICPLACEHOLDER/gm,d=/(\*)(.*?)(\*)/g,g=/^\[([^[]+)\]\(([^)]+)\)/,p=function(r){return r.replace(o,u.source).replace(t,i.source).replace(c,s.source+"$2"+s.source).replace(f,a.source+"$2"+a.source).replace(v,l.source+"$2"+l.source).replace(d,h.source+"$2"+h.source)},m=function(r){return r.replace(u,"\\_").replace(i,"\\*").replace(s,"__").replace(a,"**").replace(l,"_").replace(h,"*")},E=[a.source,s.source,h.source,l.source],b=((n={})[u.source]=2,n[i.source]=2,n),y=function(r){for(var n=Object.keys(b),e=0,t=n.length;e<t;e++)if(r.startsWith(n[e]))return n[e];return null},A=function(r,n){for(var e=0,t=E.length;e<t;e++)if(r.startsWith(E[e]))return n[n.length-1]===E[e]?n.pop():n.push(E[e]),E[e];return null},O=function(r,n,e){var t=0,i=function r(e){for(var i=[],o=!1,u="",s=0;t<n&&s<e.length;){var c=A(e.substring(s),i);c&&(u+=c,s+=c.length,o=!0);var a=y(e.substring(s));a&&(u+=a,s+=a.length,o=!0,t+=b[a]);var f=new RegExp(g).exec(e.substring(s));if(f){var l=f[2];u+="["+r(f[1])+"]("+l+")",s+=f[0].length,o=!0}c||f||(u+=e[s],s++),o||t++,o=!1}for(u=u.trimEnd();i.length>0;)u+=i.pop();return u}(r);return e&&i.length<r.length&&(i+="..."),i};function C(r,n){var e=0,t=[];if(Array.isArray(r))for(;e<r.length&&!1!==n(r[e],e,r);++e);else if("object"==typeof r&&null!==r)for(t=Object.keys(r);e<t.length&&!1!==n(r[t[e]],t[e],r);++e);}function L(r,n,e){if(!r.s){if(e instanceof R){if(!e.s)return void(e.o=L.bind(null,r,n));1&n&&(n=e.s),e=e.v}if(e&&e.then)return void e.then(L.bind(null,r,n),L.bind(null,r,2));r.s=n,r.v=e;const t=r.o;t&&t(r)}}var R=/*#__PURE__*/function(){function r(){}return r.prototype.then=function(n,e){var t=new r,i=this.s;if(i){var o=1&i?n:e;if(o){try{L(t,1,o(this.v))}catch(r){L(t,2,r)}return t}return this}return this.o=function(r){try{var i=r.v;1&r.s?L(t,1,n?n(i):i):e?L(t,1,e(i)):L(t,2,i)}catch(r){L(t,2,r)}},t},r}();function j(r){return r instanceof R&&1&r.s}var I="undefined"==typeof window,S=function(r,n){for(var e=[],t=0;t<r.length;t+=n)e.push(r.slice(t,t+n));return e},w=function(r){return r.errors.map(function(r){var n=r.attributes,e=n.details;return{code:n.code,field:null==e?void 0:e.field,message:null==e?void 0:e.message,detailsCode:null==e?void 0:e.code,errors:Array.isArray(null==e?void 0:e.errors)?null==e?void 0:e.errors.join(". "):void 0}}).map(function(r){var n=r.field,e=r.errors;return r.code+" "+(n?"("+n+")":"")+" "+(r.message||"")+" "+(r.detailsCode||"")+" "+(e?"("+e+")":"")}).join("\n")},D=function(n){return n instanceof r==0?"string"==typeof n?n:n.message||n.toString():new r(n).errors.map(function(r){var n,e=""+r.attributes.code,t=[];return Array.isArray(null==(n=r.attributes.details)?void 0:n.errors)&&r.attributes.details.errors.forEach(function(r){t.push(Object.keys(r).map(function(n){return n+": "+r[n]}).join(", "))}),e+(t.length?": "+t.join(". "):"")}).join("\n")},P=function(r){return 0===Object.keys(r).filter(function(n){return void 0!==r[n]}).length},_=function(r,n){return void 0===n&&(n=!1),(n?r.toLowerCase():r).replace(/(?:^|\s|["'([{])+\S/g,function(r){return r.toUpperCase()})},x=function(r){return new Promise(function(n,e){return setTimeout(n,r)})},k=function(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r},H=function(r,n,e,t){var i,o;if(void 0===n&&(n=1),void 0===e&&(e=!0),void 0===t&&(t=200),!r||r.length<t)return r;var u=null==(i=r.split("."))?void 0:i.slice(0,n+1).join(".").lastIndexOf("."),s=null==(o=r.split("? "))?void 0:o.slice(0,n+1).join("? ").lastIndexOf("? "),c=-1!==s&&s<u||-1===u&&s>-1;return-1===u&&-1===s&&(u=t-1,e=!0),r.substring(0,c?s:u)+(e?"...":c?"?":".")},T=function(r,n){if(r.length<=n)return r;var e=r.substring(0,n),t=e.lastIndexOf(" ");return-1!==t&&(e=e.substr(0,t)),e+"..."},U=function(r,n){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Å","Ä","Ö"];return r.sort(function(r,t){var i=e.findIndex(function(e){var t;return e===(null==(t="string"==typeof n?r[n]:r)?void 0:t.charAt(0).toUpperCase())}),o=e.findIndex(function(r){var e;return r===(null==(e="string"==typeof n?t[n]:t)?void 0:e.charAt(0).toUpperCase())});return i?i>o?1:i===o?0:-1:-1})},M=function(r){try{var n,e=function(e){if(n)return e;throw new Error("Element "+r+" not found")},t=0,i=function(r,n,e){for(var t;;){var i=r();if(j(i)&&(i=i.v),!i)return o;if(i.then){t=0;break}var o=e();if(o&&o.then){if(!j(o)){t=1;break}o=o.s}if(n){var u=n();if(u&&u.then&&!j(u)){t=2;break}}}var s=new R,c=L.bind(null,s,2);return(0===t?i.then(f):1===t?o.then(a):u.then(l)).then(void 0,c),s;function a(t){o=t;do{if(n&&(u=n())&&u.then&&!j(u))return void u.then(l).then(void 0,c);if(!(i=r())||j(i)&&!i.v)return void L(s,1,o);if(i.then)return void i.then(f).then(void 0,c);j(o=e())&&(o=o.v)}while(!o||!o.then);o.then(a).then(void 0,c)}function f(r){r?(o=e())&&o.then?o.then(a).then(void 0,c):a(o):L(s,1,o)}function l(){(i=r())?i.then?i.then(f).then(void 0,c):f(i):L(s,1,o)}}(function(){return!n&&t<100},function(){return t++},function(){var e=document.querySelector(function(r){return(r.match(/(#[0-9][^\s:,]*)/g)||[]).forEach(function(n){r=r.replace(n,'[id="'+n.replace("#","")+'"]')}),r}(r));return e?(n=1,e):Promise.resolve(x(30)).then(function(){})});return Promise.resolve(i&&i.then?i.then(e):e(i))}catch(r){return Promise.reject(r)}};export{M as awaitElement,_ as capitalize,S as chunkArray,P as isEmpty,I as isServer,C as iterateObject,e as markdownTruncate,D as parseDatoCMSApiError,w as parseDatoError,k as rInt,x as sleep,U as sortSwedish,H as truncateParagraph,T as truncateWords};
//# sourceMappingURL=index.modern.mjs.map
